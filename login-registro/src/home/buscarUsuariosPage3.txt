import { useAuth0 } from '@auth0/auth0-react';
import React, { useState, useEffect } from 'react'
import { Redirect } from 'react-router';
import ForbidenComponent from '../shared/components/forbiden/ForbidenComponent';
import { Link } from 'react-router-dom';
import apiBseUrl from '../shared/utils/Api';
import { getDefaultNormalizer } from '@testing-library/dom';

function InformeUsuario() {

  const [elementos, setElementos] = useState([]);
  const [validUser, setValidUser] = useState(false);
  const { user, isAuthenticated } = useAuth0();
  const { loginWithRedirect } = useAuth0();
  const [data, setdata] = useState({ buscar: '' });

  const getElementos = async () => {

    try {
      const response = await fetch(`${apiBseUrl}/get-buscarusuario`);
      const jsonResponse = await response.json();
      const responseElementos = jsonResponse.data;
      // const listElementos = (
        const listElementos = responseElementos.map((elementos) =>
        <tr>
          <th scope="row">{responseElementos.id}</th>
          <td>{responseElementos.nombre}</td>
          <td>{responseElementos.apellido}</td>
          <td>{responseElementos.email}</td>
          <td>{responseElementos.cedula}</td>
          <td>{responseElementos.contraseña}</td>
          <td>{responseElementos.rol}</td>
          <td>{responseElementos.estado}</td>
        </tr>
        );
      setElementos([listElementos])
    }

    catch (error) {
      console.log(error)
    }
  }
  useEffect(() => {
    getElementos();

}, []);

  return (
    <div className="container">

      <div><p> BUSACAR USUARIO</p></div>

      <div class="row">
        <div class="col-lg-6">
          <div class="input-group">
            <div class="form-outline">
              <input type="search"
                class="form-control"
                name="buscar"
                id="busacar"
              />

            </div>
            <span class="input-group-btn">
              <button class="btn btn-primary" type="button" onClick={getElementos}>Buscar</button>
            </span>
          </div>
        </div>
      </div>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">NOMBRE</th>
              <th scope="col">APELLIDO</th>
              <th scope="col">EMAIL</th>
              <th scope="col">CEDULA</th>
              <th scope="col">CONTRASEÑA</th>
              <th scope="col">ROL</th>
              <th scope="col">ESTADO</th>
            </tr>
          </thead>
        <tbody>
            {elementos}
          </tbody>
        </table>
     </div>
        )
}
export default InformeUsuario;
